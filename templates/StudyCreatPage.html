<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>가치읽기 StudyCreatPage</title>
	<link rel="stylesheet" href="{{url_for('static',filename='ValueReadCSS.css')}}"/>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
  </head>
  <body style="height: 100%; background-color: #f0f2f3; flex-direction: column; align-items: center; font-family: Pretendardvariable, sans-serif; display: flex;">
	<script src="https://code.jquery.com/jquery-3.7.0.js"></script>
	<script>
		var isbn = "";

		window.onload = function(){
			var urlParams = new URLSearchParams(window.location.search);
			isbn = decodeURI(urlParams.get('isbn'));
			var bookTitle = decodeURI(urlParams.get('bookTitle'));
			var kdcName = decodeURI(urlParams.get('kdcName'));
			var author = decodeURI(urlParams.get('author'));
			var coverUrl = decodeURI(urlParams.get('coverUrl'));

			$("#bookTitle").text(bookTitle);
			$("#kdcName").text(kdcName);
			$("#author").text(author);
			$("#cover").attr("src", coverUrl);

		}
		function createStudy(){			
			const inputIsbn = isbn;
			const inputStudyNm = $('#inputStudyNm').val();
			const inputContent = $('#inputContent').val();
			const inputJoinLinkUrl = $('#inputJoinLinkUrl').val();
	        $.ajax({
            	url: "https://가치읽기.site/v1/study",
                type: "POST",
                dataType: "json",
				data: {"studyNm":inputStudyNm, "isbn":isbn, "joinLinkUrl":inputJoinLinkUrl, "content":inputContent},
                success: function (response) {
					alert("스터디가 정상적으로 등록되었습니다.");
					location.href="https://가치읽기.site/studyDetail?studyRegNo="+response['studyReg'][0];
                },
                error: function (error) {
                            alert("countTester 통신 실패2");
                },
            }); 

		}

	</script>
	
	
	<!--화면 영역-->
	<div style="width: 500px; height: auto; max-width: 100%; min-height: 400px; background-color: #ffffff; flex-direction: column; flex: 0 auto; align-items: center; display: block;">
		<!--상단 바-->
		<div style="display: block; box-sizing: border-box;">
			<div style="z-index: 5; width: 500px; max-width: 100%; background-color: rgba(0, 0, 0, 0); border: 0 #000; flex-direction: column; margin-left: auto; margin-right: auto; padding-top: 15px; padding-bottom: 15px; display: flex; background: #ffffff; position: relative;">
				<div style="width: 100%; max-width: 1080px; grid-row-gap: 0px; flex-flow: column; align-content: stretch; justify-content: flex-start; align-items: stretch; margin-left: auto; margin-right: auto; padding-left: 24px; padding-right: 24px; display: block;">
					<div style="flex: 1; justify-content: center; align-self: center; align-items: center; display: flex; position: relative;">
						<a href="./MainPage.html" class="navbar-brand-8 text-center w-nav-brand w--current">
							<img src="/static/logo.png" alt="Logo" height="30">
						</a>
					</div>
				</div>
			</div>
		</div>
		<!--스터디 만들기 상세 영역-->
		<section style="width: 500px; max-width: 100%; background-color: #fff; border: 1px #141617; padding: 0 0 16px 0; display: block;">
			<div class="container-9 w-container">
				<div class="course-info-wrapper">
					<div style="position: relative; width: 100%; height: 50vh; display: flex; flex-direction: column; justify-content: center; align-items: center;">
						<img style="position: absolute; width: 100%; height: 50vh; object-fit: cover; margin-bottom:10px;" id="cover"/>
						<div class="course-title-wrapper" style="z-index:1; background: linear-gradient(to top, #fff, #fff 37%, transparent); width: 100%; height: 50vh; padding: 20px; display:flex; flex-direction: column; justify-content: flex-end; align-items: flex-start;">
							<div class="descript-wrapper-2">
								<div class="card-description-wrapper-2-bottom" >
									<div class="text-color-gray70-2 body-14px course-info-3-text tag">스터디 만들기</div>
								</div>
							</div>
							<div class="contents-title-6">
								<div class="div-block-62">
									<div>
										<img src="https://cdn-icons-png.flaticon.com/512/5988/5988242.png" width="27" height="" alt="" class="image-33">
									</div>
									<h1 class="course-title title-20px course" style="font-size: 16px; color:gray;">
										스터디로 가치를 더 해주세요
									</h1>
								</div>
							</div>
						</div>
					</div>
					<div class="about-course-wrapper" style="padding-top: 0px; padding-bottom: 10px;">
						<div style="font-size: 16px; color: #1f1d1d; font-weight: 900; padding-top: 0px; padding-bottom:5px;">스터디 정보 입력🎭</div>
						<div class="div-block-102">
							<div class="course-info-list-wrapper">
								<div class="course-info" style="padding-right:20px; padding-left:20px; border-radius: 8px; background-color: #fcf5f5;">
									<div class="course-info3-title-wrapper">
										<h4 class="course-detali text-color-gray70">
											스터디명
										</h4>
										<input
										  id ="inputStudyNm"
										  type="text"
										  placeholder="스터디명을 입력하세요"
										  value=""
										  style="padding: 0 30px 0 0; height: 40px; outline: none; flex: 1; background-color: #fcf5f5; border: 0; border-radius: 8px; font-weight: 500; font-size: 15px; color: black;"/>
									</div>
								</div>
								<div class="div-block-110 h"></div>
								<div class="course-info" style="padding-right:20px; padding-left:20px; border-radius: 8px; background-color: #fcf5f5;">
									<div class="course-info3-title-wrapper">
										<h4 class="course-detali text-color-gray70">
											설명
										</h4>
										<div style="vertical-align: middle;">
											<textarea
												id = "inputContent"
												placeholder="스터디에 대한 설명을 입력하세요"
												style="height: 100px; outline: none; flex: 1; background-color: #fcf5f5; border: 0; border-radius: 8px; font-weight: 500; font-size: 15px; color: black;"></textarea>
										</div>
									</div>
								</div>
								<div class="div-block-110 h"></div>
								<div class="course-info" style="padding-right:20px; padding-left:20px; border-radius: 8px; background-color: #fcf5f5">
									<div class="course-info3-title-wrapper">
										<h4 class="course-detali text-color-gray70">
											오픈채팅방
										</h4>
										<input
										  id ="inputJoinLinkUrl"
										  type="text"
										  placeholder="오픈채팅방 URL을 입력하세요"
										  value=""
										  style="padding: 0 30px 0 0; height: 40px; outline: none; flex: 1; background-color: #fcf5f5; border: 0; border-radius: 8px; font-weight: 500; font-size: 15px; color: black;"/>
									</div>
								</div>
								<div class="div-block-110 h"></div>
								<div class="course-info" style="padding-right:20px; padding-left:20px;">
									<div class="course-info3-title-wrapper">
										<h4 class="course-detali text-color-gray70">
											책 제목
										</h4>
										<div >
											<div id="bookTitle" class="course-info-3-text"></div>
										</div>
									</div>
								</div>
								<div class="div-block-110 h"></div>
								<div class="course-info" style="padding-right:20px; padding-left:20px;">
									<div class="course-info3-title-wrapper">
										<h4 class="course-detali text-color-gray70">
											지은이
										</h4>
										<div>
											<div id="author" class="course-info-3-text"></div>
										</div>
									</div>
								</div>
								<div class="div-block-110 h"></div>
								<div class="course-info" style="padding-right:20px; padding-left:20px;">
									<div class="course-info3-title-wrapper">
										<h4 class="course-detali text-color-gray70">
											분류
										</h4>
										<div>
											<div id="kdcName" class="course-info-3-text"></div>
										</div>
									</div>
								</div>
							</div>
						</div>
						<div class="editor-form-wrapper review-editor-form" style="margin-top:40px">
							<div class="form-block-3 w-form">
								<button class="button w-button" onclick="createStudy();">등록하기</button>
							</div>
						</div>
					</div>
				</div>
			</div>
		</section>
		<!--하단 푸터 영역-->
		<section style="width: 500px; max-width: 100%; background-color: #fff; border: 1px #141617; padding: 16px 0 64px 0; display: block;">
			<div style="width: 100%; max-width: 1080px; grid-row-gap: 0px; flex-flow: column; align-content: stretch; justify-content: flex-start; margin: 0 auto; padding-left: 24px; padding-right: 24px; display: block;">
				<div style="height: 60px"></div>
			</div>
		</section>
		<!--하단 푸터 영역-->
		<!--하단 고정 메뉴 바-->
		<div class="about-gnb-wrapper">
			<div class="gnb-wrapper">
				<div class="gnb-icon-wrapper">
					<a href="/" class="link-block-5 w-inline-block w--current">
						<div class="gnb-icon">
							<div class="image-wrapper-1-1 gnb">
								<img src="{{url_for('static',filename='/nav/home.svg')}}"  class="wrapper-iner-image-2">
							</div>
							<div class="body-14px text-color-gray70">홈</div>
						</div>
					</a>
					<a href="/SearchPage" class="link-block-5 w-inline-block w--current">
						<div class="gnb-icon"><div class="image-wrapper-1-1 gnb">
							<img src="{{url_for('static',filename='/nav/study.svg')}}"class="wrapper-iner-image-2">
						</div>
						<div class="body-14px text-color-gray70">검색</div>
						</div>
					</a>
					<a href="/" class="link-block-5 w-inline-block w--current">
						<div class="gnb-icon"><div class="image-wrapper-1-1 gnb">
							<img src="{{url_for('static',filename='/nav/detail.svg')}}" class="wrapper-iner-image-2">
						</div>
						<div class="body-14px text-color-gray70">!</div>
						</div>
					</a>
				</div>
			</div>
		</div>
		<!--하단 고정 메뉴 바 끝-->
	</div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz" crossorigin="anonymous"></script>
	<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  </body>
</html>